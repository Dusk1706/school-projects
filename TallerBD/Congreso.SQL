CREATE DATABASE CONGRESOS
GO
USE CONGRESOS
GO
CREATE TABLE MUNICIPIOS(
    MunID INT NOT NULL,
    MunNombre NVARCHAR(50)
)
GO
CREATE TABLE ESCUELAS(
    EscID INT NOT NULL,
    EscNombre NVARCHAR(50),
    EscDomicilio NVARCHAR(50),
    MunID INT NOT NULL
)
GO
CREATE TABLE ESTUDIANTES(
    EstID INT NOT NULL,
    EstNombre NVARCHAR(50) NOT NULL,
    EstApellidos NVARCHAR(50) NOT NULL,
    EstDomicilio NVARCHAR(50) NOT NULL,
    EstCorreo NVARCHAR(30) NULL,
    EstCelular NCHAR(10) NULL,
    EscID INT NOT NULL
)
GO
CREATE TABLE CONGRESOS(
    ConID INT NOT NULL,
    ConNombre NVARCHAR(50),
    ConDescripcion NVARCHAR(100),
    ConFechaIni DATETIME NOT NULL,
    ConFechaFin DATETIME NOT NULL,
    ConLugar NVARCHAR(50) NOT NULL
)
GO
CREATE TABLE EXPOSITORES(
    ExpID INT NOT NULL,
    ExpNombre NVARCHAR(50) NOT NULL,
    ExpApellidos NVARCHAR(50) NOT NULL,
    ExpCorreo NVARCHAR(50) NULL,
    ExpCelular NCHAR(10) NULL
)
GO
CREATE TABLE EVENTOS(
    EveID INT NOT NULL,
    EveNombre NVARCHAR(50) NOT NULL,
    EveDescripcion NVARCHAR(100) NOT NULL,
    EveFecha DATETIME NOT NULL,
    EveLugar NVARCHAR(50) NOT NULL,
    EveCosto NUMERIC(5,2) NOT NULL,
    ExpID INT NOT NULL
)
GO
CREATE TABLE REGISTRO(
    Folio INT NOT NULL,
    Fecha DATETIME NOT NULL,
    ConID INT NOT NULL,
    EstID INT NOT NULL
)
GO
CREATE TABLE REGISTROXEVENTO(
    Folio INT NOT NULL,
    EveID INT NOT NULL
)

GO

--CREACION DE LLAVES PRIMARIAS
ALTER TABLE MUNICIPIOS ADD CONSTRAINT PK_MUNICIPIOS PRIMARY KEY(MunID)
ALTER TABLE ESCUELAS ADD CONSTRAINT PK_ESCUELAS PRIMARY KEY(EscID)
ALTER TABLE ESTUDIANTES ADD CONSTRAINT PK_ESTUDIANTES PRIMARY KEY(EstID)
ALTER TABLE CONGRESOS ADD CONSTRAINT PK_CONGRESOS PRIMARY KEY(ConID)
ALTER TABLE EXPOSITORES ADD CONSTRAINT PK_EXPOSITORES PRIMARY KEY(ExpID)
ALTER TABLE EVENTOS ADD CONSTRAINT PK_EVENTOS PRIMARY KEY(EveID)
ALTER TABLE REGISTRO ADD CONSTRAINT PK_REGISTRO PRIMARY KEY(Folio)

GO

--CREACION DE LLAVES EXTERNAS
ALTER TABLE ESCUELAS ADD CONSTRAINT FK_ESC_MUNICIPIO FOREIGN KEY(MunID) REFERENCES MUNICIPIOS(MunID)
ALTER TABLE ESTUDIANTES ADD CONSTRAINT FK_EST_ESCUELA FOREIGN KEY(EscID) REFERENCES ESCUELAS(EscID)
ALTER TABLE EVENTOS ADD CONSTRAINT FK_EVE_EXPOSITORES FOREIGN KEY(ExpID) REFERENCES EXPOSITORES(ExpID)
ALTER TABLE REGISTRO ADD
CONSTRAINT FK_REG_CONGRESO FOREIGN KEY(ConID) REFERENCES CONGRESOS(ConID),
CONSTRAINT FK_REG_ESTUDIANTES FOREIGN KEY(EstID) REFERENCES ESTUDIANTES(EstID)
ALTER TABLE REGISTROXEVENTO ADD
CONSTRAINT FK_REG_FOLIO FOREIGN KEY(Folio)REFERENCES REGISTRO(Folio),
CONSTRAINT FK_REG_EVENTO FOREIGN KEY(EveID)REFERENCES EVENTOS(EveID)

GO

--LLAVES UNICAS
ALTER TABLE EXPOSITORES ADD CONSTRAINT UN_CORREO_EXP UNIQUE(ExpCorreo)
ALTER TABLE ESTUDIANTES ADD CONSTRAINT UN_CORREO_EST UNIQUE(EstCorreo)

GO
--RESTRICCIONES DE COMPROBACION
ALTER TABLE EVENTOS ADD 
CONSTRAINT CC_EVE_COSTO CHECK(EveCosto>0)
GO
ALTER TABLE EXPOSITORES ADD
CONSTRAINT CC_EXP_CELULAR CHECK(LEN(ExpCelular)=10)
GO
ALTER TABLE ESTUDIANTES ADD
CONSTRAINT CC_EST_CELULAR CHECK(LEN(EstCelular)=10)
--VALOR PREDEFINIDO
ALTER TABLE ESTUDIANTES ADD 
CONSTRAINT DC_EST_CORREO DEFAULT('SIN CORREO')FOR EstCorreo,
CONSTRAINT DC_EST_CELULAR DEFAULT('SIN CELULAR')FOR EstCelular
GO
ALTER TABLE EXPOSITORES ADD 
CONSTRAINT DC_EXP_CORREO DEFAULT('SIN CORREO')FOR ExpCorreo,
CONSTRAINT DC_EXP_CELULAR DEFAULT('SIN CELULAR')FOR ExpCelular
--Inserciones
GO
INSERT CONGRESOS VALUES (1, 'Congreso de Tecnología', 'Un congreso sobre las últimas tendencias tecnológicas.', '10-15-2023', '10-17-2023', 'LOLA')
INSERT CONGRESOS VALUES (2, 'Congreso Médico', 'Un congreso médico internacional.', '09-05-2023', '09-07-2023', 'KSPPS')
INSERT CONGRESOS VALUES (3, 'Congreso de Marketing', 'Un congreso sobre estrategias de marketing.', '09-05-2023', '09-07-2023',  'BANGLADESH')
INSERT CONGRESOS VALUES (4, 'Congreso de Arte', 'Un congreso de artistas y creatividad.',  '12-10-2023', '12-12-2023', 'ARSENAL')
INSERT CONGRESOS VALUES (5, 'Congreso Científico', 'Un congreso de investigadores y científicos.', '08-01-2023', '08-03-2023', 'SINGAPOUR')
GO
INSERT MUNICIPIOS VALUES (1, 'Culiacan')
INSERT MUNICIPIOS VALUES (2, 'Mazatlan')
INSERT MUNICIPIOS VALUES (3, 'Los Mochis')
INSERT MUNICIPIOS VALUES (4, 'Guasave')
INSERT MUNICIPIOS VALUES (5, 'Navolato')
GO
INSERT ESCUELAS VALUES (1, 'Escuela Primaria San Juan', 'Calle 123', 1)
INSERT ESCUELAS VALUES (2, 'Colegio Santa María', 'Avenida XYZ', 2)
INSERT ESCUELAS VALUES (3, 'Escuela Secundaria Benito Juárez', 'Calle 456', 3)
INSERT ESCUELAS VALUES (4, 'Instituto San Pedro', 'Avenida ABC', 4)
INSERT ESCUELAS VALUES (5, 'Escuela Técnica Industrial', 'Calle 789', 5)
GO
INSERT ESTUDIANTES VALUES (1, 'Juan', 'Pérez', 'Calle 123', 'juan.perez@email.com', '1234567890', 1)
INSERT ESTUDIANTES VALUES (2, 'María', 'González', 'Avenida XYZ', 'maria.gonzalez@email.com', '9876543210', 2)
INSERT ESTUDIANTES VALUES (3, 'Carlos', 'López', 'Calle 456', 'carlos.lopez@email.com', '5551237890', 3)
INSERT ESTUDIANTES VALUES (4, 'Ana', 'Martínez', 'Avenida ABC', 'ana.martinez@email.com', '1112223333', 4)
INSERT ESTUDIANTES VALUES (5, 'Pedro', 'Rodríguez', 'Calle 789', 'pedro.rodriguez@email.com', '3334445555', 5)
GO
INSERT EXPOSITORES VALUES (1, 'Juan', 'González López', 'juan.gonzalez@email.com', '1234567890')
INSERT EXPOSITORES VALUES (2, 'María', 'López Martínez', 'maria.lopez@email.com', '9876543210')
INSERT EXPOSITORES VALUES (3, 'Carlos', 'Pérez García', 'carlos.perez@email.com', '5551237890')
INSERT EXPOSITORES VALUES (4, 'Ana', 'Martínez Rodríguez', 'ana.martinez@email.com', '1112223333')
INSERT EXPOSITORES VALUES (5, 'Pedro',  'Gómez Díaz', 'pedro.gomez@email.com','3334445555')
GO
INSERT EVENTOS VALUES (1, 'Conferencia de Tecnología', 'Una conferencia sobre las últimas tendencias tecnológicas.', '10-15-2023', 'Culiacán', 50.00, 1)
INSERT EVENTOS VALUES (2, 'Feria de Arte', 'Una feria de arte y cultura.', '11-20-2023', 'Mazatlán', 25.00, 2)
INSERT EVENTOS VALUES (3, 'Concierto en Vivo', 'Un concierto de música en vivo.', '09-5-2023', 'Los Mochis', 30.00, 3)
INSERT EVENTOS VALUES (4, 'Exposición de Ciencia', 'Una exposición científica interactiva.', '12-10-2023', 'Guasave', 15.00, 4)
INSERT EVENTOS VALUES (5, 'Festival de Comida', 'Un festival de comida local.', '08-01-2023', 'Navolato', 20.00, 5)
GO
INSERT REGISTRO VALUES (1, '09-15-2023', 1, 1)
INSERT REGISTRO VALUES (2, '09-16-2023', 2, 2)
INSERT REGISTRO VALUES (3, '09-17-2023', 3, 3)
INSERT REGISTRO VALUES (4, '09-18-2023', 4, 4)
INSERT REGISTRO VALUES (5, '09-19-2023', 5, 5)
GO
INSERT REGISTROXEVENTO VALUES (1, 1)
INSERT REGISTROXEVENTO VALUES (2, 2)
INSERT REGISTROXEVENTO VALUES (3, 3)
INSERT REGISTROXEVENTO VALUES (4, 4)
INSERT REGISTROXEVENTO VALUES (5, 5)
